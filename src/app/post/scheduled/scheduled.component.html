<ng-container *ngIf="!loading">
  <div class="m-10">
    <button (click)="statusChange('')" [ngClass]="{
        'btn btn-primary': status == '',
        'btn-primary-outline': status != ''
      }">
      View All
    </button>
    <button (click)="statusChange('scheduled')" [ngClass]="{
        'btn btn-primary': status == 'scheduled',
        'btn-primary-outline': status != 'scheduled'
      }">
      Scheduled
    </button>
    <button (click)="statusChange('published')" [ngClass]="{
        'btn btn-primary': status == 'published',
        'btn-primary-outline': status != 'published'
      }">
      Published
    </button>
    <button (click)="statusChange('draft')" [ngClass]="{
        'btn btn-primary': status == 'draft',
        'btn-primary-outline': status != 'draft'
      }">
      Draft
    </button>
    <button (click)="statusChange('failed')" [ngClass]="{
        'btn btn-primary': status == 'failed',
        'btn-primary-outline': status != 'failed'
      }">
      Failed
    </button>
  </div>

  <div style="padding-left: 5px">
    <ol class="relative border-s border-gray-200 dark:border-gray-700" *ngIf="posts">
      <li class="mb-10 ms-6" *ngFor="let conn of posts">
        <span
          class="absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -start-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900">
          <svg class="w-3 h-3 text-blue-800 dark:text-blue-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
            fill="currentColor" viewBox="0 0 20 20" *ngIf="conn.status == 'scheduled'">
            <path
              d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" />
          </svg>

          <svg class="w-3 h-3 text-red-800 dark:text-red-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
            width="24" height="24" fill="none" viewBox="0 0 24 24" *ngIf="conn.status == 'failed'">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M6 18 17.94 6M18 18 6.06 6" />
          </svg>

          <svg class="w-3 h-3 text-green-800 dark:text-green-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
            width="24" height="24" fill="currentColor" viewBox="0 0 24 24" *ngIf="conn.status == 'published'">
            <path fill-rule="evenodd"
              d="M12 2c-.791 0-1.55.314-2.11.874l-.893.893a.985.985 0 0 1-.696.288H7.04A2.984 2.984 0 0 0 4.055 7.04v1.262a.986.986 0 0 1-.288.696l-.893.893a2.984 2.984 0 0 0 0 4.22l.893.893a.985.985 0 0 1 .288.696v1.262a2.984 2.984 0 0 0 2.984 2.984h1.262c.261 0 .512.104.696.288l.893.893a2.984 2.984 0 0 0 4.22 0l.893-.893a.985.985 0 0 1 .696-.288h1.262a2.984 2.984 0 0 0 2.984-2.984V15.7c0-.261.104-.512.288-.696l.893-.893a2.984 2.984 0 0 0 0-4.22l-.893-.893a.985.985 0 0 1-.288-.696V7.04a2.984 2.984 0 0 0-2.984-2.984h-1.262a.985.985 0 0 1-.696-.288l-.893-.893A2.984 2.984 0 0 0 12 2Zm3.683 7.73a1 1 0 1 0-1.414-1.413l-4.253 4.253-1.277-1.277a1 1 0 0 0-1.415 1.414l1.985 1.984a1 1 0 0 0 1.414 0l4.96-4.96Z"
              clip-rule="evenodd" />
          </svg>

          <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
            width="24" height="24" fill="currentColor" viewBox="0 0 24 24" *ngIf="conn.status == 'draft'">
            <path d="M9 7V2.221a2 2 0 0 0-.5.365L4.586 6.5a2 2 0 0 0-.365.5H9Z" />
            <path fill-rule="evenodd"
              d="M11 7V2h7a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9h5a2 2 0 0 0 2-2Zm4.707 5.707a1 1 0 0 0-1.414-1.414L11 14.586l-1.293-1.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0l4-4Z"
              clip-rule="evenodd" />
          </svg>

          <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
            width="24" height="24" fill="none" viewBox="0 0 24 24" *ngIf="conn.status == 'sending'">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M17.651 7.65a7.131 7.131 0 0 0-12.68 3.15M18.001 4v4h-4m-7.652 8.35a7.13 7.13 0 0 0 12.68-3.15M6 20v-4h4" />
          </svg>


        </span>
        <h3 class="flex items-center mb-1 text-lg font-semibold text-gray-900 dark:text-white">
          {{ conn.publish_at | date: "yyyy-MM-dd HH:mm" }}

          <ng-container *ngIf="conn.status == 'failed'">
            <span nz-icon nzType="info-circle" nzTheme="outline" nz-tooltip nzTooltipTitle="{{ conn.Logs }}"></span>
          </ng-container>
          <ng-container *ngIf="conn.status == 'scheduled' || conn.status == 'draft'">
            <span
              class="bg-yellow-100 text-yellow-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-700 dark:text-white ms-3 cursor-pointer"
              (click)="navigateToEdit(conn.id)">Edit</span>
            <span
              class="bg-red-100 text-red-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300 ms-3 cursor-pointer"
              nz-popconfirm nzPopconfirmTitle="Are you sure delete this post?" nzPopconfirmPlacement="bottom"
              (nzOnConfirm)="deletePost(conn.id)">Delete</span>
          </ng-container>
        </h3>
        <p class="mb-4 text-base font-normal text-gray-500 dark:text-gray-400">
          <ng-container *ngIf="connection.ConnectionName == 'twitter' && conn.status !='published'">
            <app-twitter-card [name]="connection.Name" [profile_image]="connection.ProfileImage" [images]="conn.medias"
              [postDate]="conn.publish_at" [postContent]="conn.description" [status]="conn.status"></app-twitter-card>
          </ng-container>

          <ng-container *ngIf="connection.ConnectionName == 'twitter' && conn.status=='published'">
            <div class="max-w-md">
              <app-tweet
                [tweetUrl]="'https://twitter.com/' + connection.Username + '/status/' + conn.published_post_id">
              </app-tweet>

            </div>
          </ng-container>

          <ng-container *ngIf="connection.ConnectionName == 'facebook_page'">
            <app-facebook-card [name]=" connection.Name" [profile_image]="connection.ProfileImage"
              [images]="conn.medias" [postDate]="conn.publish_at" [postContent]="conn.description"
              [status]="conn.status"></app-facebook-card>
          </ng-container>


          <ng-container *ngIf="connection.ConnectionName == 'linkedin_profile'">
            <app-linkedin-card [name]="connection.Name" [profile_image]="connection.ProfileImage" [images]="conn.medias"
              [postDate]="conn.publish_at" [postContent]="conn.description" [status]="conn.status"></app-linkedin-card>
          </ng-container>

          <ng-container *ngIf="connection.ConnectionName == 'instagram'">
            <app-instagram-card [name]="connection.Name" [profile_image]="connection.ProfileImage"
              [images]="conn.medias" [postDate]="conn.publish_at" [postContent]="conn.description"
              [status]="conn.status"></app-instagram-card>
          </ng-container>

          <ng-container *ngIf="connection.ConnectionName == 'pintrest_board'">
            <app-pinterest-card [name]="connection.Name" [profile_image]="connection.ProfileImage"
              [images]="conn.medias" [postDate]="conn.publish_at" [postContent]="conn.description"
              [status]="conn.status"></app-pinterest-card>
          </ng-container>
        </p>
      </li>
    </ol>
  </div>

  <ng-container *ngIf="!posts">
    <nz-empty nzNotFoundImage="https://gw.alipayobjects.com/zos/antfincdn/ZHrcdLPrvN/empty.svg"
      [nzNotFoundContent]="contentTpl" [nzNotFoundFooter]="footerTpl">
      <ng-template #contentTpl>
        <span> No Post Avaliable </span>
      </ng-template>
      <ng-template #footerTpl>
        <a nz-button nzType="primary" (click)="redirectAddNew()">Create Now</a>
      </ng-template>
    </nz-empty>
  </ng-container>
</ng-container>

<div class="animation-container" *ngIf="loading">
  <lottie-player src="/assets/animations/loading.json" background="transparent" speed="1" loop autoplay>
  </lottie-player>
</div>

<ng-template #defaultDot>
  <i nz-icon nzType="clock-circle" nzTheme="outline"></i>
</ng-template>

<ng-template #successDot>
  <i nz-icon nzType="check-circle" nzTheme="outline" style="color: #85d1d0"></i>
</ng-template>

<ng-template #errorDot>
  <i nz-icon nzType="close-circle" nzTheme="outline" style="color: #ffa1a6"></i>
</ng-template>

<ng-template #scheduledDot>
  <i nz-icon nzType="calendar" nzTheme="outline" style="color: #bfbfe5"></i>
</ng-template>

<ng-template #draftDot>
  <i nz-icon nzType="save" nzTheme="outline" style="color: #ffc08d"></i>
</ng-template>