<ng-container *ngIf="!loading">
  <div class="mt-2 text-right add-new-button">
    <button type="button" class="btn-primary-icon" (click)="addNew()">
      <svg
        class="w-6 h-6 text-gray-800 dark:text-white"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="none"
        viewBox="0 0 24 24"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 8v4l3 3m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
        />
      </svg>
      &nbsp; Schedule New
    </button>
  </div>


  <ol class="relative border-s border-gray-200 dark:border-gray-700">                  
    <li class="mb-10 ms-6" *ngFor="let post of posts | keyvalue">            
      <div class="absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -start-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"></div>
        <h3 class="flex items-center mb-1 text-lg font-semibold text-gray-900 dark:text-white">{{post.key}}</h3>

        <ng-container *ngFor="let p of post.value">
          <time class="block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500">{{ p.time | date:"medium" }} </time>
        <p class="mb-4 text-base font-normal text-gray-500 dark:text-gray-400">
          <ng-container *ngIf="p.post.id > 0">
            <p class="text-green-300">{{ p.post.description }} <span class="bg-blue-100 text-blue-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ms-3" (click)="editPost(p.post.id)">Edit</span></p>
          </ng-container>
          <ng-container *ngIf="p.post.id == 0">
            <span class="bg-blue-100 text-blue-800 text-sm font-medium me-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ms-3" (click)="addNew(p.time)">Schedule</span>
          </ng-container>
        </p>
        </ng-container>
        
        
    </li>
</ol>
  
</ng-container>

<!-- Add Edit Modal-->
<nz-modal
  nzDraggable
  nzCentered
  [(nzVisible)]="isVisible"
  nzTitle="Create New Post"
  (nzOnCancel)="handleCancel()"
  [nzWidth]="modalWidth"
  [nzClosable]="true"
  [nzKeyboard]="false"
  [nzCloseOnNavigation]="false"
  [nzFooter]="null"
  class="dark:bg-gray-700"
>
  <ng-container *nzModalContent>
    <add-new
      [connection]="connection"
      [slot]="slot"
      [postId]="postId"
    ></add-new>
  </ng-container>
</nz-modal>

<div class="animation-container" *ngIf="loading">
  <lottie-player
    src="/assets/animations/loading.json"
    background="transparent"
    speed="1"
    loop
    autoplay
  >
  </lottie-player>
</div>
