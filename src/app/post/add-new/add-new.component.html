<ng-container *ngIf="!loading">
  <div nz-row>
    <div nz-col nzXs="24" nzSm="15" nzMd="15" nzLg="15">
      <ng-container *ngIf="connection.ConnectionName == 'pintrest_board'">
        <div class="mt-10">
          <input nz-input placeholder="Title" [(ngModel)]="title" type="text" />
        </div>
      </ng-container>

      <div class="mt-10">
        <button
          nz-button
          nzType="dashed"
          (click)="showModal()"
          class="full-width"
        >
          <span nz-icon nzType="bulb" nzTheme="fill"></span> Write With AI
        </button>
      </div>
      <div class="mt-10">
        <textarea
          nz-input
          placeholder="Post Content"
          [(ngModel)]="postContent"
          [nzAutosize]="{ minRows: 8, maxRows: 15 }"
        ></textarea>
      </div>
      <ng-container
        *ngIf="
          connection.ConnectionName == 'facebook_page' ||
          connection.ConnectionName == 'pintrest_board'
        "
      >
        <div class="mt-10">
          <input nz-input placeholder="Link" [(ngModel)]="link" type="text" />
        </div>
      </ng-container>

      <div class="mt-10">
        <app-upload-media
          [files]="files"
          (uploadedFiles)="uploadedFiles($event)"
        ></app-upload-media>
      </div>

      <div nz-row>
        <div nz-col nzXs="24" nzSm="15" nzMd="15" nzLg="15">
          <div class="mt-10">
            <nz-date-picker
              nzShowTime
              nzFormat="yyyy-MM-dd HH:mm"
              [(ngModel)]="date"
              class="full-width"
            ></nz-date-picker>
          </div>
        </div>
        <div nz-col nzXs="24" nzSm="9" nzMd="9" nzLg="9">
          <div class="mt-10 text-right">
            <nz-space>
              <button
                *nzSpaceItem
                nz-button
                nzType="default"
                (click)="schedulePost(true)"
              >
                Send Now
              </button>
              <button
                *nzSpaceItem
                nz-button
                nzType="dashed"
                (click)="schedulePost(true)"
              >
                Draft
              </button>
              <button
                *nzSpaceItem
                nz-button
                nzType="primary"
                (click)="schedulePost()"
              >
                Schedule
              </button>
            </nz-space>
          </div>
        </div>
      </div>
    </div>

    <div nz-col nzXs="24" nzSm="9" nzMd="9" nzLg="9">
      <div class="m-10">
        <ng-container *ngIf="connection.ConnectionName == 'twitter'">
          <app-twitter-card
            [name]="connection.Name"
            [profile_image]="connection.ProfileImage"
            [images]="images"
            [postDate]="date"
            [postContent]="postContent"
          ></app-twitter-card>
        </ng-container>

        <ng-container *ngIf="connection.ConnectionName == 'facebook_page'">
          <app-facebook-card
            [name]="connection.Name"
            [profile_image]="connection.ProfileImage"
            [images]="images"
            [postDate]="date"
            [postContent]="postContent"
          ></app-facebook-card>
        </ng-container>

        <ng-container *ngIf="connection.ConnectionName == 'linkedin_profile'">
          <app-linkedin-card
            [name]="connection.Name"
            [profile_image]="connection.ProfileImage"
            [images]="images"
            [postDate]="date"
            [postContent]="postContent"
          ></app-linkedin-card>
        </ng-container>

        <ng-container *ngIf="connection.ConnectionName == 'instagram'">
          <app-instagram-card
            [name]="connection.Name"
            [profile_image]="connection.ProfileImage"
            [images]="images"
            [postDate]="date"
            [postContent]="postContent"
          ></app-instagram-card>
        </ng-container>

        <ng-container *ngIf="connection.ConnectionName == 'pintrest_board'">
          <app-pinterest-card
            [name]="connection.Name"
            [profile_image]="connection.ProfileImage"
            [images]="images"
            [postDate]="date"
            [postContent]="postContent"
          ></app-pinterest-card>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- Modal-->
  <nz-modal
    nzDraggable
    nzCentered
    [(nzVisible)]="isVisible"
    nzTitle="Write With AI"
    (nzOnCancel)="handleCancel()"
    (nzOnOk)="handleOk()"
    [nzBodyStyle]="{
      'min-height': '200px'
    }"
    [nzFooter]="null"
  >
    <ng-container *nzModalContent>
      <app-ai-content
        (generatedContent)="generatedContent($event)"
      ></app-ai-content>
    </ng-container>
  </nz-modal>
</ng-container>

<div class="animation-container" *ngIf="loading">
  <lottie-player
    src="/assets/animations/loading.json"
    background="transparent"
    speed="1"
    loop
    autoplay
  >
  </lottie-player>
</div>
